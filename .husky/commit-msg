#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

commit_msg_file="$1"
commit_msg=$(cat "$commit_msg_file")

if ! printf '%s' "$commit_msg" | grep -Eq '^(feat|fix|chore|docs|refactor|test|ci|build|revert)(\([^)]+\))?: .+'; then
  echo "\033[31mCommit message must follow conventional commits (e.g., feat(api): add endpoint).\033[0m"
  exit 1
fi
